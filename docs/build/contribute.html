

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contribute to Inversion Test Problems &mdash; Inversion Test Problems 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="index.html">
                Inversion Test Problems
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
      <li>Contribute to Inversion Test Problems</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="_sources/contribute.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contribute to Inversion Test Problems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reporting-issues">Reporting issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-contribute">How to contribute</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <section id="contribute-to-inversion-test-problems">
<h1>Contribute to Inversion Test Problems<a class="headerlink" href="#contribute-to-inversion-test-problems" title="Permalink to this headline">¶</a></h1>
<section id="reporting-issues">
<h2>Reporting issues<a class="headerlink" href="#reporting-issues" title="Permalink to this headline">¶</a></h2>
<p>Bug reports and feature requests are welcome. Please search before lodging an issue at
our Github <a class="reference external" href="https://github.com/inlab-geo/inversion-test-problems">repository</a>.</p>
</section>
<section id="how-to-contribute">
<h2>How to contribute<a class="headerlink" href="#how-to-contribute" title="Permalink to this headline">¶</a></h2>
<p>Thank you for contributing to Inversion Test Problems! Inversion test problems is
a community driven effort to create a collection of forward
codes, simulating a wide range of physical problems. ITP relies on you to
contribute your forward code! You do not need to know all the detailes to get started.
Here we explain step by step how to contribute your code to ITP. If this page
does not answer all of your questions, don’t hesitate to contact us via
<a class="reference external" href="https://github.com/inlab-geo/inversion-test-problemscofi/issues/new/choose">GitHub issues</a>
or <a class="reference external" href="https://inlab-geo.slack.com">Slack</a>.</p>
<section id="setting-it-up-right">
<h3>Setting it up right<a class="headerlink" href="#setting-it-up-right" title="Permalink to this headline">¶</a></h3>
<p>We assume that the potential contributor already has a Github account and
established a secure connection using https or SSH. If you wish to set up a new
account or connection before contributing, please see here:</p>
<p><a class="reference external" href="https://docs.github.com/en/get-started">Getting started with Github</a>,
and <a class="reference external" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">creating a personal access token</a>.</p>
<section id="fork-and-clone-the-itp-repository">
<h4>Fork and clone the ITP repository<a class="headerlink" href="#fork-and-clone-the-itp-repository" title="Permalink to this headline">¶</a></h4>
<ol class="arabic" id="fork-clone">
<li><p>Navigate to the <a class="reference external" href="https://github.com/inlab-geo/inversion-test-problems">GitHub repository</a></p></li>
<li><p>Click the “Fork” button on top right of the page (followed by a confirmation page
with a “Create fork” button)</p></li>
<li><p>Now you will be redirected to your own fork of <code class="docutils literal notranslate"><span class="pre">Inversion</span> <span class="pre">Test</span> <span class="pre">Problems</span></code>,
where you can freely commit changes and add your code.</p>
<div class="mermaid">
            %%{init: { 'logLevel': 'debug', 'theme': 'base', 'gitGraph': {'showCommitLabel': false}} }%%
  gitGraph
    commit
    commit
    branch your_own_fork
    checkout your_own_fork
    commit
    commit
    checkout main
    merge your_own_fork
    commit
    commit
        </div></li>
<li><p>Next, create a local copy of your ITP repository using ‘’clone’’
(Github slang for download):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YOUR_GITHUB_ACCOUNT</span><span class="o">/</span><span class="n">inversion</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">problems</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>replacing <code class="docutils literal notranslate"><span class="pre">YOUR_GITHUB_ACCOUNT</span></code> with your own account.</p>
</li>
</ol>
</section>
<section id="environment-setup">
<h4>Environment setup<a class="headerlink" href="#environment-setup" title="Permalink to this headline">¶</a></h4>
<p id="env-setup">We recommend to use a clean environment to avoid dependency issues. Here we use
conda to create the environment (<a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html#">How to install conda</a>).
Create a new environment using these commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">NEW_PROBLEM</span> <span class="n">scipy</span> <span class="n">matplotlib</span>
</pre></div>
</div>
<p>Replace NEW_PROBLEM with a sensible name. Next, activate the new environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">NEW_PROBLEM</span>
</pre></div>
</div>
</section>
</section>
<section id="create-your-own-inversion-test-problem">
<h3>Create your own Inversion Test Problem<a class="headerlink" href="#create-your-own-inversion-test-problem" title="Permalink to this headline">¶</a></h3>
<p>A new contribution to Inversion Test Problem has to conform to a consistent
file structure. The simplest way to ensure that a new contribution includes
all files is to start the creation of a new problem from the template.
Execute the following command in the ROOT folder of the cloned Github repository
of ITP (replacing NEW_PROBLEM with the previous choice):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">utils</span><span class="o">/</span><span class="n">_create_new_example</span><span class="o">.</span><span class="n">py</span> <span class="n">NEW_PROBLEM</span>
</pre></div>
</div>
<p>A new folder with the name NEW_PROBLEM is created under ROOT/contrib/ that contains
all files needed for a new contribution.</p>
<p>There is a whole lot of stuff that needs to be in order to make a successful
contribution. Details are listed here for now:</p>
<ol class="arabic">
<li><p>All files as generated by the template must be present in the contributed
folder.</p></li>
<li><p>THIS POINT CAN PROBABLY GO: Do not change files outside of your folder. In case you changed files in
the rest of the repository, do the following steps:</p>
<ul>
<li><p>Create a backup of your contribution (the folder contrib/NEW_PROBLEM)</p></li>
<li><p>Delete your local version of inversion-test-problems</p></li>
<li><p>Re-run this command to get a clean version of the repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YOUR_GITHUB_ACCOUNT</span><span class="o">/</span><span class="n">inversion</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">problems</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Copy/past your folder NEW_PROBLEM to inversion-test-problems/contrib/</p></li>
</ul>
</li>
<li><p>Choose a sensible, unique name for your contribution.</p></li>
<li><p>The name of the contribution (NEW_PROBLEM) must be used twice:</p>
<ul>
<li><p>for the folder name: inversion-test-problems/contrib/NEW_PROBLEM</p></li>
<li><p>for the central class object in NEW_PROBLEM/__init__.py, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">new_problem</span><span class="p">():</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Some contributions might want to include measured values. A contribution can
include small datasets in plain textfiles (ASCII or similar). Data files have
to be stored in /contrib/NEW_PROBLEM/data/ and can be loaded using the
following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;data/datafile.txt&quot;</span><span class="p">)</span>
<span class="n">tmp2</span><span class="o">=</span><span class="n">tmp</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">tmp2</span><span class="p">))</span>
<span class="k">del</span>  <span class="n">tmp</span><span class="p">,</span> <span class="n">tmp2</span>
</pre></div>
</div>
<p>The decoder might have to be adjusted to load the data successfully.</p>
</li>
<li><p>The contribution can include problem-specific functions, but should always
include the following standard functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">get_model</span><span class="p">:</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">starting</span> <span class="n">model</span>
<span class="o">-</span> <span class="n">forward</span><span class="p">:</span> <span class="n">Contains</span> <span class="n">the</span> <span class="n">forward</span> <span class="n">calculation</span><span class="o">.</span> <span class="n">Returns</span> <span class="n">synthetic</span> <span class="n">data</span> <span class="n">values</span>
   <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">model</span> <span class="ow">and</span><span class="p">,</span> <span class="k">if</span> <span class="n">applicable</span><span class="p">,</span> <span class="n">recording</span> <span class="n">locations</span><span class="o">.</span>
<span class="o">-</span> <span class="n">plot_model</span><span class="p">:</span> <span class="n">Visualises</span> <span class="n">the</span> <span class="n">problem</span><span class="o">.</span> <span class="n">This</span> <span class="n">should</span> <span class="n">include</span> <span class="n">a</span> <span class="n">sensible</span> <span class="n">visualisation</span>
   <span class="n">of</span> <span class="n">the</span> <span class="n">model</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">synthetic</span> <span class="n">data</span><span class="o">.</span>
</pre></div>
</div>
<p>There are many more functions that a problem can contain, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">inversion_suggestion</span><span class="p">:</span> <span class="n">A</span> <span class="n">string</span> <span class="n">containing</span> <span class="n">inversion</span> <span class="n">suggestions</span><span class="o">..</span>
<span class="o">-</span> <span class="n">gradient</span><span class="p">:</span> <span class="n">Returns</span> <span class="n">the</span> <span class="n">Jacobian</span> <span class="n">of</span> <span class="n">the</span> <span class="n">problem</span><span class="p">,</span> <span class="n">given</span> <span class="n">the</span> <span class="n">model</span> <span class="ow">and</span> <span class="n">recording</span> <span class="n">locations</span><span class="o">.</span>
<span class="o">-</span> <span class="n">reg_param</span><span class="p">:</span> <span class="n">Contains</span> <span class="n">a</span> <span class="n">sensible</span> <span class="n">value</span> <span class="k">for</span> <span class="n">regularisation</span> <span class="n">parameter</span>
<span class="o">-</span> <span class="n">dx</span><span class="p">:</span> <span class="n">Spatial</span> <span class="n">resolution</span> <span class="ow">in</span> <span class="n">x</span><span class="o">-</span><span class="n">direction</span>
<span class="o">-</span> <span class="n">dt</span><span class="p">:</span> <span class="n">temporal</span> <span class="n">resolution</span>
<span class="o">-</span> <span class="n">nt</span><span class="p">:</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">time</span> <span class="n">steps</span>
<span class="o">-</span> <span class="n">And</span> <span class="n">many</span> <span class="n">more</span><span class="o">..</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="commit-push-and-pull-request">
<h3>Commit, push and pull request<a class="headerlink" href="#commit-push-and-pull-request" title="Permalink to this headline">¶</a></h3>
<p>The git <a class="reference external" href="https://git-scm.com/docs/git-add">add</a> command is how you add files to
the so-called “staging” area.</p>
<p>The git <a class="reference external" href="https://git-scm.com/docs/git-commit">commit</a> operation captures the staged
changes of the project.</p>
<p>To commit a new contribution to the repository, we therefore recommend to use
the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="n">contrib</span><span class="o">/</span><span class="n">NEW_PROBLEM</span> <span class="c1"># Adds the new folder, but no other changes</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;My commit message&quot;</span>
</pre></div>
</div>
<p>Please note that we aim to use
<a class="reference external" href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines">Angular style</a>
commit messages throughout our projects. Simply speaking, we categorise our commits by
a short prefix (from <code class="docutils literal notranslate"><span class="pre">feat</span></code>, <code class="docutils literal notranslate"><span class="pre">fix</span></code>, <code class="docutils literal notranslate"><span class="pre">docs</span></code>, <code class="docutils literal notranslate"><span class="pre">style</span></code>, <code class="docutils literal notranslate"><span class="pre">refactor</span></code>, <code class="docutils literal notranslate"><span class="pre">perf</span></code>,
<code class="docutils literal notranslate"><span class="pre">test</span></code> and <code class="docutils literal notranslate"><span class="pre">chore</span></code>).</p>
<p>Once your changes are committed, push the commits into your remote fork:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p>Open the remote repository under your GitHub account, you should be able to see the
new commits pushed.</p>
<p>Now that you’ve finished the coding and editting work, look for the “Contribute” button
-&gt; “Open pull request”, write a description and continue as prompted.</p>
<p>If everything is in place, the pull request is automatically accepted and the
new inversion test problem becomes part of the python package. Thank you for
your contribution!</p>
</section>
<section id="jupyter-notebook">
<h3>Jupyter Notebook<a class="headerlink" href="#jupyter-notebook" title="Permalink to this headline">¶</a></h3>
<p>Additionally, we encourage you to add a Jupyter Notebook with an identical name
into the folder ‘’Jupyter Notebooks`` that contains the following:</p>
<ul class="simple">
<li><p>An extensive description of the new inversion test problem, containing information about (but not limited to)…</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>the forward calculation (ie. the underlying physics) and how it was implemented.</p></li>
<li><p>which inversion method is used (and regularisation) and how it was implemented.</p></li>
<li><p>the physical unit of relevant variables, but at least of <code class="docutils literal notranslate"><span class="pre">model</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></li>
<li><p>all changeable parameters, possibly in a list.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>An example of the new problem being used, with a reasonable output.</p></li>
</ul>
</section>
</section>
</section>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script type="text/javascript" src="None"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright 2022, InLab.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.
        </div>
    </div>  

</body>
</html>